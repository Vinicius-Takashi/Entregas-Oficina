<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login</title>
  <style>
    body{
      margin:0;
      font-family:Arial, sans-serif;
      background:#f0f2f5;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
    }
    .login-box{
      background:white;
      padding:30px 25px;
      border-radius:12px;
      box-shadow:0 6px 20px rgba(0,0,0,0.15);
      width:100%;
      max-width:320px;
    }
    .login-box h2{
      margin:0 0 20px;
      text-align:center;
      font-size:24px;
    }
    .login-box label{
      display:block;
      margin-bottom:5px;
      font-size:14px;
    }
    .login-box input{
      width:100%;
      padding:12px;
      margin-bottom:15px;
      border:1px solid #ccc;
      border-radius:6px;
      font-size:14px;
    }
    .login-box button{
      width:100%;
      padding:12px;
      border:none;
      border-radius:6px;
      background:#007bff;
      color:white;
      font-size:16px;
      cursor:pointer;
      transition: background 0.3s;
    }
    .login-box button:hover{
      background:#0056b3;
    }
    .forgot-password{
      display:block;
      margin-top:12px;
      text-align:center;
      font-size:14px;
      color:#007bff;
      text-decoration:none;
      transition: color 0.3s;
    }
    .forgot-password:hover{
      color:#0056b3;
      text-decoration:underline;
    }
    .message{
      margin-top:15px;
      text-align:center;
      font-size:14px;
      font-weight:bold;
    }
    .error{
      color:red;
      background:#ffe6e6;
      padding:8px;
      border-radius:6px;
    }
    .success{
      color:green;
      background:#e6ffe6;
      padding:8px;
      border-radius:6px;
    }
  </style>
</head>
<body>
  <div class="login-box">
    <h2>Login</h2>
    <form id = "loginForm" method="POST" action="/login">
      <label for="username">Usuário</label>
      <input type="text" id="username" name="username" required>
      
      <label for="password">Senha</label>
      <input type="password" id="password" name="password" required>
      
      <button type="submit">Entrar</button>
      <a href="/forget" class="forgot-password">Esqueceu a senha?</a>
    </form>
    <div id="loginMessage" class="message"></div>
  </div>
  <script>
  document.getElementById("loginForm").addEventListener("submit", async e => {
  e.preventDefault(); // impede o envio padrão do formulário
  const response = await fetch("/login", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      username: document.getElementById("username").value,
      password: document.getElementById("password").value,
      message: document.getElementById("loginMessage").value,
      success: false
    })
  });
    const user = document.getElementById("username").value.trim()
    const pass = document.getElementById("password").value.trim()
    const msg = document.getElementById("loginMessage")
    const dados = await response.json()
    if(dados.success === true){
      msg.className = "message success"
      msg.textContent = dados.message
      setTimeout(() => {
        window.location.href = dados.redirect
      }, 100)
    } else {
      msg.className = "message error"
      msg.textContent = dados.message
    }
  });
  
  
  </script>
</body>
</html>